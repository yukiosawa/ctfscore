ctfscore
========

CTFスコアサーバです。FuelPHPで動作します。

## 環境構築(Ubuntu)
apache, mysql and php
$ sudo apt-get install -y apache2 mysql-server php5 php5-mysql

### FuelPHP
(方法1)
$ curl get.fuelphp.com/oil | sh
$ cd /var/www
$ sudo oil create ctfscore

または
(方法2)
$ cd /var/www
$ sudo git clone --recursive git://github.com/fuel/fuel.git ctfscore
$ cd ctfscore
$ php composer.phar self-update
$ php composer.phar update
GitHub APIのtokenを求められるかも -> GitHubのアカウントが必要
$ php oil refine install

### apache Document Root
virtual hostの設定を作成
$ sudo cp etc/apache2/ctfscore.conf /etc/apache2/sites-available/.
$ sudo a2dissite 000-default
$ sudo a2ensite ctfscore

### apache mod rewrite
$ sudo a2enmod rewrite
$ sudo service apache2 restart

### node.js and socket.io
$ sudo apt-get install -y nodejs
$ sudo update-alternatives --install /usr/bin/node nodejs /usr/bin/nodejs 100
$ sudo mkdir /var/www/ctfscore/nodejs
$ cd /var/www/ctfscore/nodejs
$ curl https://www.npmjs.com/install.sh | sudo sh
$ sudo npm install socket.io
$ sudo cp node_modules/socket.io-client/socket.io.js /var/www/ctfscore/public/assets/js/.

### socket.io-php-emitter
$ sudo apt-get install -y redis-server
$ sudo npm install socket.io-redis
$ sudo npm install socket.io-emitter
$ sudo git clone https://github.com/rase-/socket.io-php-emitter.git
$ cd socket.io-php-emitter
$ sudo /var/www/ctfscore/composer.phar install

### アプリケーションの配置と初期化
$ sudo cp -r app/* /var/www/ctfscore/.
$ sudo etc/scripts/setup_mysql.sh
$ 
$ etc/scripts/init_db.sh

### サービスの開始
$ etc/scripts/start_services.sh

